var width,height,pointerX,pointerY,STAR_COLOR="#fff",STAR_SIZE=3,STAR_MIN_SCALE=.2,OVERFLOW_THRESHOLD=50,STAR_COUNT=(window.innerWidth+window.innerHeight)/18,canvas=document.getElementById("starbg"),context=canvas.getContext("2d"),scale=1,stars=[],velocity={x:0,y:0,tx:0,ty:0,z:1e-8},touchInput=!1,infoElement=(generate(),resize(),step(),window.onresize=resize,document.getElementById("content"));function generate(){for(var t=0;t<STAR_COUNT;t++)stars.push({x:0,y:0,z:STAR_MIN_SCALE+Math.random()*(1-STAR_MIN_SCALE)})}function placeStar(t){t.x=Math.random()*width,t.y=Math.random()*height}function recycleStar(t){var e="z",o=Math.abs(velocity.x),n=Math.abs(velocity.y);(1<o||1<n)&&(e="h"===(n<o?Math.random()<o/(o+n)?"h":"v":Math.random()<n/(o+n)?"v":"h")?0<velocity.x?"l":"r":0<velocity.y?"t":"b"),t.z=STAR_MIN_SCALE+Math.random()*(1-STAR_MIN_SCALE),"z"===e?(t.z=.1,t.x=Math.random()*width,t.y=Math.random()*height):"l"===e?(t.x=-OVERFLOW_THRESHOLD,t.y=height*Math.random()):"r"===e?(t.x=width+OVERFLOW_THRESHOLD,t.y=height*Math.random()):"t"===e?(t.x=width*Math.random(),t.y=-OVERFLOW_THRESHOLD):"b"===e&&(t.x=width*Math.random(),t.y=height+OVERFLOW_THRESHOLD)}function resize(){scale=window.devicePixelRatio||1,width=window.innerWidth*scale,height=window.innerHeight*scale,canvas.width=width,canvas.height=height,stars.forEach(placeStar)}function step(){context.clearRect(0,0,width,height),update(),render(),requestAnimationFrame(step)}function update(){velocity.tx*=.96,velocity.ty*=.96,velocity.x+=.8*(velocity.tx-velocity.x),velocity.y+=.8*(velocity.ty-velocity.y),stars.forEach(function(t){t.x+=velocity.x*t.z,t.y+=velocity.y*t.z,t.x+=(t.x-width/2)*velocity.z*t.z,t.y+=(t.y-height/2)*velocity.z*t.z,t.z+=velocity.z,(t.x<-OVERFLOW_THRESHOLD||t.x>width+OVERFLOW_THRESHOLD||t.y<-OVERFLOW_THRESHOLD||t.y>height+OVERFLOW_THRESHOLD)&&recycleStar(t)})}function render(){stars.forEach(function(t){context.beginPath(),context.lineCap="round",context.lineWidth=STAR_SIZE*t.z*scale,context.globalAlpha=.5+.5*Math.random(),context.strokeStyle=STAR_COLOR,context.beginPath(),context.moveTo(t.x,t.y);var e=2*velocity.x,o=2*velocity.y;Math.abs(e)<.1&&(e=.5),Math.abs(o)<.1&&(o=.5),context.lineTo(t.x+e,t.y+o),context.stroke()})}function movePointer(t,e){var o,n;"number"==typeof pointerX&&"number"==typeof pointerY&&(o=t-pointerX,n=e-pointerY,velocity.tx=velocity.tx+o/8*scale*(touchInput?1:-1),velocity.ty=velocity.ty+n/8*scale*(touchInput?1:-1)),pointerX=t,pointerY=e}function onMouseMove(t){touchInput=!1,movePointer(t.clientX,t.clientY)}function onTouchMove(t){touchInput=!0,movePointer(t.touches[0].clientX,t.touches[0].clientY,!0),t.preventDefault()}function onMouseLeave(){pointerY=pointerX=null}infoElement&&(infoElement.addEventListener("mousemove",onMouseMove),infoElement.addEventListener("touchmove",onTouchMove)),canvas.ontouchmove=onTouchMove,canvas.ontouchend=onMouseLeave,document.onmouseleave=onMouseLeave;
//# sourceMappingURL=starbg.js.map
